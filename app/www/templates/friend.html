<ion-view view-title="Friend">
  <ion-content class="padding has-header has-search-bar">

    <!-- Warning message for unconnected users -->

      <!-- User friends' requests list -->
      <div ng-if="friendsRequest.length > 0" class="animate-if">
        <h2>They want to add you as a friend :</h2>
        <ul>
          <li ng-repeat="f_req in friendsRequest">
            {{f_req.username}}
            <span class="right-aligned">
              <button ion-button ng-click="acceptRequest(f_req)"
                      class="button button-icon animate-if right-aligned">
                <i class="icon ion-person-add balanced"></i>
              </button>
              <button ion-button ng-click="declineRequest(f_req)"
                      class="button button-icon animate-if right-aligned">
                <i class="icon ion-ios-close-outline assertive"></i>
              </button>
            </span>
          </li>
        </ul>
      </div>

      <!-- User friends' list -->
      <div>
        <h2>My friends : <button class="button button-icon icon ion-ios-search-strong" ng-click="showFilterBar()"></button></h2>

        <!-- Search Bar to add new friends -->
        <div>
          <div ng-submit="addRequest()" class="">
            <div class="item-input-wrapper ">
              <span class="input-label">Username : </span>
              <input type="text" name="friendName" ng-model="futureFriend.username" placeholder="Add a friend" uib-typeahead="state for state in states | filter:$viewValue | limitTo:8" class="form-control">
              <button ng-click="addRequest()" class="button button-clear input-button button-positive">Add</button>
            </div>
          </div>
        </div>

<!-- Recherche de thibaud -->
        <div class="search-bar bar bar-header item-input-inset">
          <div class="item-input-wrapper">
            <form ng-submit="addRequest()">
              <input type="text" name="friendName" ng-model="futureFriend.username" placeholder="Add a friend">
            </form>
          </div>
          <div ng-if="futureFriend.requestSend == true" class="anime-if">
            Request successfully send to {{futureFriend.username}}.
          </div>
          <div ng-if="futureFriend.requestSend == false" class="anime-if">
            Request coud not be send to {{futureFriend.username}}.
          </div>
        </div>
        <ion-list>
          <ion-item ng-repeat="f in friends">
            <h2>{{f.username}}<button ion-button icon-only color="danger" class="right-aligned" ng-click="deleteFriend(f)">x</button></h2>
          </ion-item>
        </ion-list>
        <ul>
          <li ng-repeat="f in friends" ng-click="setActive(f)">
              <h3 ng-class="{active: activeItem == f}">
                {{f.username}}
                <button ion-button ng-click="delete(f)"
                        ng-if="activeItem == f" class="button button-icon animate-if right-aligned">
                  <i class="icon ion-ios-close-outline assertive"></i>
                </button>
              </h3>
          </li>
        </ul>

    </div>
  </ion-content>
</ion-view>
