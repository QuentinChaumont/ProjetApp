<ion-view view-title="Friend">
  <ion-content class="padding has-header has-search-bar">
      <!-- User friends' requests list -->
      <div ng-if="friendsRequest.length > 0" class="animate-if">
        <h2>They want to add you as a friend :</h2>
        <ion-list>
          <ion-item ng-repeat="f_req in friendsRequest">
            <h2>{{f_req.username}}</h2>
            <ion-option-button side="right" ng-click="acceptRequest(f_req)" class="balanced">
              <ion-icon class="icon ion-person-add"></ion-icon>
            </ion-option-button>
            <ion-option-button side="right" ng-click="declineRequest(f_req)" class="assertive">
              <ion-icon class="icon ion-minus-circled"></ion-icon>
            </ion-option-button>
          </ion-item>
        </ion-list>
      </div>

      <!-- User friends' list -->
      <div>
        <h2>My friends : <button class="button button-icon icon ion-ios-search-strong" ng-click="showFilterBar()"></button></h2>

        <!-- Search Bar to add new friends -->
        <div>
          <div ng-submit="addRequest()" class="">
            <div class="item-input-wrapper ">
              <span class="input-label">Username : </span>
              <input type="text" ng-model="selected" uib-typeahead="state for state in states | filter:$viewValue | limitTo:8" class="form-control">
              <button ng-click="submit()" class="button button-clear input-button button-positive">Add</button>
            </div>
          </div>
        </div>

<!-- Recherche de thibaud -->
        <div class="search-bar bar bar-header item-input-inset">
          <div class="item-input-wrapper">
            <form ng-submit="addRequest()">
              <input type="text" name="friendName" ng-model="futureFriend.username" placeholder="Add a friend">
            </form>
          </div>
          <div ng-if="futureFriend.requestSend == true" class="anime-if">
            Request successfully send to {{futureFriend.username}}.
          </div>
          <div ng-if="futureFriend.requestSend == false" class="anime-if">
            Request coud not be send to {{futureFriend.username}}.
          </div>
        </div>
        <ion-list>
          <ion-item ng-repeat="place in places">
            <h2>{{place.name}}</h2>
          </ion-item>
        </ion-list>

        <ion-list can-swipe="true">
            <ion-item ng-repeat="f in friends">
              <h2>{{f.username}}</h2>
              <ion-option-button side="left" ng-click="deleteFriend(f)" class="assertive">
                  <ion-icon class="icon ion-minus-circled"></ion-icon>
              </ion-option-button>
            </ion-item>
        </ion-list>
    </div>
  </ion-content>
</ion-view>
